---
- name: Install default packages (step 1/3)
  homebrew:
    name:
      - bash-completion
      - cmake
      - curl
      - git
      - htop
      - jq
      - openssl
      - rdate
      - tree
      - zip
      - coreutils
      - gnu-sed
      - gnu-tar
    state: latest
    update_homebrew: yes

- name: Install python-pip - Download get-pip.py
  get_url:
    url: https://bootstrap.pypa.io/get-pip.py
    dest: /tmp/get-pip.py
    mode: 0440

- name: Install python-pip
  shell: "python /tmp/get-pip.py; python3 /tmp/get-pip.py"

- name: Install python packages
  pip:
    name: "{{ packages }}"
    executable: pip3
  vars:
    packages:
    - awscli
    - mycli
  become: true

- name: Update homebrew (step 3/3)
  homebrew:
    update_homebrew: yes
    path: /home/linuxbrew/.linuxbrew/bin
